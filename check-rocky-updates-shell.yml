- name: V√©rifier les mises √† jour critiques et importantes
  hosts: all
  become: true
  gather_facts: true

  tasks:
    - name: Obtenir les mises √† jour de s√©curit√© Critiques
      shell: "dnf updateinfo list security severity=Critical | grep -c '^RHSA'"
      register: critical_updates
      changed_when: false

    - name: Obtenir les mises √† jour de s√©curit√© Importantes
      shell: "dnf updateinfo list security severity=Important | grep -c '^RHSA'"
      register: important_updates
      changed_when: false

    - name: Afficher le r√©sum√© syst√®me et s√©curit√©
      debug:
        msg: |
          ‚úÖ Informations syst√®me :
          - OS       : {{ ansible_distribution }} {{ ansible_distribution_version }}
          - Uptime   : {{ ansible_uptime_seconds | int // 3600 }}h {{ (ansible_uptime_seconds | int % 3600) // 60 }}m

          üîê Mises √† jour de s√©curit√© :
          - Critiques : {{ critical_updates.stdout }}
          - Importantes : {{ important_updates.stdout }}
